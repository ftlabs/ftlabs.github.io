<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Andrew Betts &#8211; FT Labs</title>
	<atom:link href="http://labs.ft.com/author/andrew/feed/" rel="self" type="application/rss+xml" />
	<link>http://labs.ft.com</link>
	<description>Labs is a team at the &#60;a href=&#34;http://www.ft.com&#34; class=&#34;ft&#34;&#62;Financial Times&#60;/a&#62; which experiments with exciting new web technologies. &#60;a href=&#34;/about&#34;&#62;Learn more&#60;/a&#62;</description>
	<lastBuildDate>Tue, 28 Mar 2017 09:47:19 +0000</lastBuildDate>
	<language>en-GB</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.6.4</generator>
	<item>
		<title>Edge 5: Here we go again</title>
		<link>http://labs.ft.com/2015/07/edge-5-here-we-go-again/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=edge-5-here-we-go-again</link>
		<pubDate>Wed, 01 Jul 2015 22:01:28 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[News]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=12901</guid>
		<description><![CDATA[We curated the programme for our fifth Edge conference, the event for people who make the web work, and ran it with the London Web Performance group and Facebook London.  It all got a bit heated...]]></description>
				<content:encoded><![CDATA[<p class='standfirst'>Last weekend I hosted the fifth edition of Edge Conf, the web technology conference for the people who help make the web work. It was a great success, with over £13,000 raised for <a href="http://www.codeclub.org.uk">CodeClub</a>, a charity close to my heart and those of many others in the industry, as well as many bugs raised, spec changes proposed and blogs written. More on all of that below. First a few reflections on how it went:</p>
<figure id="attachment_12971" class="wp-caption alignnone"><img alt='Me delivering the opening talk.' src="/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_09-20-13_P6270077.jpg" width="688" class="size-full wp-image-12971" srcset="http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_09-20-13_P6270077.jpg 688w, http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_09-20-13_P6270077-300x131.jpg 300w" sizes="(max-width: 688px) 100vw, 688px" /><figcaption class="wp-caption-text">Me delivering the opening talk.</figcaption></figure>
<h2>It all got a bit heated</h2>
<p>We (or rather Facebook, who were in all other respects brilliant) forgot to make sure the air conditioning would be working. As a result, on one of the hottest days of the year, the attendees sweltered in 30C+ conference rooms.</p>
<p>We <a href='https://twitter.com/thespite/status/614755140759867393'>got a lot of stick for this</a> but it was reasonably good humoured given that we at least did what we could.  We hired some large industrial fans on 2 hours notice and had them brought across London (from Gatwick!). They turned out to be too noisy.  But then we hit on a better idea and cleared out Sainsburys of <strong>literally every ice cream and lolly they had</strong> and handed them out to attendees. This went down very well indeed!</p>
<figure id="attachment_12941" class="wp-caption alignnone"><img alt='Ice creams to the rescue!' src="/wp-content/uploads/2015/07/CIhAiLIWUAAJ8Kc.png" width="688" class="size-full wp-image-12941" srcset="http://labs.ft.com/wp-content/uploads/2015/07/CIhAiLIWUAAJ8Kc.png 688w, http://labs.ft.com/wp-content/uploads/2015/07/CIhAiLIWUAAJ8Kc-300x179.png 300w" sizes="(max-width: 688px) 100vw, 688px" /><figcaption class="wp-caption-text">Ice creams to the rescue!</figcaption></figure>
<p>We also overestimated the amount of drink needed for the after party.  This proved less of a problem.</p>
<h2>Panels, breakouts, keynote: on going multi-format</h2>
<figure id="attachment_12951" class="wp-caption alignnone"><img alt='The Network Ops breakout hosted by Natasha Rooney' src="/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_17-05-07_P6270594.jpg" width="688" class="size-full wp-image-12951" srcset="http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_17-05-07_P6270594.jpg 688w, http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_17-05-07_P6270594-300x98.jpg 300w" sizes="(max-width: 688px) 100vw, 688px" /><figcaption class="wp-caption-text">The Network Ops breakout hosted by Natasha Rooney</figcaption></figure>
<p>This was the first time we tried proper breakout sessions, small rooms, circular seating, etc. it worked very well, with highlights including the <strong>installable web apps</strong>, <strong>Sass/CSS patterns</strong> and <strong>progressive enhancement</strong> sessions. It was interesting to see how different breakout hosts handled their session very differently, and the best were those who had prepared well, imposed a good structure, and made sure to create a collaborative atmosphere. I think <strong>Andreas Bovens</strong>, <strong>Lyza Gardner</strong> and <strong>Mairead Buchan</strong> deserve particular thanks for being totally on top of this.</p>
<p>The panel sessions were still there though, the Edge staple that I&#8217;m yet to find replicated well at any other event. We added some new elements though, like a group chat channel for each session (using Slack), and <a href='http://eu.getcatchbox.com/'>throwable microphones</a>!</p>
<h2>Being accessible</h2>
<p>We had a record number of attendees with accessibility needs, and I&#8217;m pretty happy with how well we catered for these.  The venue came with great physical accessibility, and we chose a party venue which likewise offered good access.  An <a href="https://edgeconf.com/2015-london/faq#q5">FAQ on the website</a> described the facilities available, and we offered several delegates a walkthrough of the venue before the conference.</p>
<p>Our use of Slack caused issues for screen reader users, but Slack has an IRC bridge and we had turned it on, we just hadn&#8217;t told people about it.</p>
<figure id="attachment_12981" class="wp-caption alignnone"><img alt='Dan Appelquist hosting the Security panel' src="/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_09-43-42_P6270121.jpg" width="688" class="size-full wp-image-12981" srcset="http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_09-43-42_P6270121.jpg 688w, http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_09-43-42_P6270121-300x110.jpg 300w" sizes="(max-width: 688px) 100vw, 688px" /><figcaption class="wp-caption-text">Dan Appelquist hosting the Security panel</figcaption></figure>
<h2>Meeting some special people</h2>
<p>This year we had some new attendees who it was a privilege to meet and chat to. You should go follow them:</p>
<ul>
<li><a href="https://twitter.com/leoniewatson">Léonie Watson</a> was one of our breakout hosts, and I got to chat to her in the early hours of Sunday morning at unofficial after-party #2. It&#8217;s impossible to stereotype Léonie as a blind person when she is the most insightful person in the room.</li>
<li>I&#8217;m no security expert, but I could listen to <a href="https://jhalderm.com/">J Alex Halderman</a> for hours.  Somehow he can make me completely paranoid and totally fascinated at the same time.</li>
</ul>
<h2>Attendee feedback</h2>
<p>We got feedback from around 50% of attendees, who rated the sessions like this:</p>
<p><figure><img alt='Edge 5 feedback' src="/wp-content/uploads/2015/06/Screen-Shot-2015-06-30-at-23.55.57.png" width="1125" class="alignnone size-full wp-image-12911" srcset="http://labs.ft.com/wp-content/uploads/2015/06/Screen-Shot-2015-06-30-at-23.55.57.png 1125w, http://labs.ft.com/wp-content/uploads/2015/06/Screen-Shot-2015-06-30-at-23.55.57-300x131.png 300w, http://labs.ft.com/wp-content/uploads/2015/06/Screen-Shot-2015-06-30-at-23.55.57-1024x449.png 1024w" sizes="(max-width: 1125px) 100vw, 1125px" /></figure></p>
<p>Most rating feedback on sessions was positive, with the breakouts for <strong>progressive enhancement</strong>, <strong>installing web apps</strong>, <strong>polyfills</strong> and <strong>network ops</strong> being rated no lower than good by anyone.  The front end data and ES6 patterns breakouts were most divisive, with the biggest spread in ratings: they achieved very high proportions of outstanding ratings, but balanced those with high proportions of &#8216;satisfactory and below&#8217;.  The security breakout fared least well.</p>
<p>Attendees voted on the stand out contributor of the day.  Here were the top five:</p>
<ol>
<li>Jake Archibald</li>
<li>Jeremy Keith</li>
<li>Alex Russell</li>
<li>Patrick Hamann</li>
<li>Remy Sharp</li>
</ol>
<p>All extremely smart and vocal people who are well known to the community. It would be great to see some less familiar names in this list though.</p>
<figure id="attachment_13001" class="wp-caption alignnone"><img alt='The Edge organisers at the after party: Perry, Andrew, Vicky and Ruth' src="/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_20-09-50_P6270689.jpg" width="688" class="size-full wp-image-13001" srcset="http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_20-09-50_P6270689.jpg 688w, http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_20-09-50_P6270689-300x107.jpg 300w" sizes="(max-width: 688px) 100vw, 688px" /><figcaption class="wp-caption-text">The Edge organisers at the after party: Perry, Andrew, Vicky and Ruth</figcaption></figure>
<h2>Ideas for next time</h2>
<p>We can already see some ways to improve the event next time:</p>
<ul>
<li><strong>Improve the speaker queue:</strong> Slack went totally bananas for large parts of some of the breakout sessions, and some of it got too disjointed from what the panel was saying. I think we inadvertently encouraged people to engage on chat instead of speaking, which we should avoid. I&#8217;d plan to change the <code>/q</code> command for attendees (which people thought stood for &#8216;question&#8217;) to <code>/s [summary]</code> (s for &#8216;speak&#8217;), where the summary is a quick taste of the point you want to make.  The panel should see only the speaker queue with these queued points, not the whole unfiltered Slack channel, and the fact that people have put themselves in the queue ought to be announced to the Slack channel so that attendees are more aware that it&#8217;s something that they should consider doing.</li>
<li><strong>Start with ice breaker:</strong> We prepped ice breakers for the breakouts, but we actually want more participation in the panels, so it would be good to try and do something at the very beginning of the event with everyone.</li>
<li><strong>Shorten the day:</strong> People were flagging towards the end.  We could lose the keynote, or might drop one breakout slot.</li>
<li><strong>Do some microphone training:</strong> No matter how much you plead with them, people just will not speak <em>into</em> a microphone.</li>
</ul>
<figure id="attachment_13011" class="wp-caption alignnone"><img alt='Josh expertly demonstrates how not to hold a Catchbox.' src="/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_11-13-24_P6270420.jpg" width="688" class="size-full wp-image-13011" srcset="http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_11-13-24_P6270420.jpg 688w, http://labs.ft.com/wp-content/uploads/2015/07/Edgeconf-2015_2015-06-27_11-13-24_P6270420-300x120.jpg 300w" sizes="(max-width: 688px) 100vw, 688px" /><figcaption class="wp-caption-text">Josh expertly demonstrates how not to hold a Catchbox</figcaption></figure>
<h2>Coverage</h2>
<p>Quite a few blog posts have started to appear with coverage or thoughts following on from the conference.  Here are the ones I&#8217;m aware of:</p>
<ul>
<li><a href='http://www.kryogenix.org/days/2015/06/28/availability/'>On Availability</a> by Stuart Langridge</li>
<li><a href='http://www.brucelawson.co.uk/2015/edge-conf-notes-on-user-queries/'>Notes on User Queries</a> from Bruce Lawson</li>
<li>Orde Sanders&#8217; notes on <a href='https://decadecity.net/blog/2015/06/28/user-queries'>User Queries</a> and <a href='https://decadecity.net/blog/2015/06/27/edge-conf-security'>Security</a></li>
<li>Steve Workman&#8217;s notes on <a href='http://www.steveworkman.com/performance/2015/data-driven-performance-breakout-at-edge-conference/'>Data driven performance</a></li>
<li>A thoughtful progressive enhancement post from Jason Brown, <a href='https://medium.com/@jjaybrown98/it-s-time-to-progress-702e0779df3a'>It&#8217;s Time to Progress</a></li>
<li>Tim Kadlec, also on the topic of progressive enhancement, <a href='http://timkadlec.com/2015/06/thriving-in-unpredictability/'>Thriving in unpredictability</a></li>
<li><a href='http://nolanlawson.com/2015/06/30/safari-is-the-new-ie/'>Safari is the new IE</a> by Nolan Lawson has gained a lot of traction</li>
<li>Virginie Galindo&#8217;s <a href='http://poulpita.com/2015/07/01/the-security-question-at-edge/'>The security question at Edge</a> covers the discussions she participated in on the security panel</li>
<li><a href='http://www.liquidframeworks.com/blog/2015-07-01/edge-conference-5-london'>Edge conference 5 London</a> is a general conference writeup by Craig Cavalier</li>
<li>Christian Heilmann concluded that <a href='http://christianheilmann.com/2015/07/01/over-the-edge-web-components-are-an-endangered-species/'>web components are an endangered species</a> following his components panel</li>
</ul>
]]></content:encoded>
			</item>
		<item>
		<title>Polyfill service 1.1</title>
		<link>http://labs.ft.com/2015/01/polyfill-service-1-1/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=polyfill-service-1-1</link>
		<pubDate>Thu, 08 Jan 2015 00:08:06 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[News]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=12061</guid>
		<description><![CDATA[Read about the release of a major update to the polyfill service, with our first CI-validated build, many improved polyfills and 8 new ones, support for callbacks and improvements in our documentation.]]></description>
				<content:encoded><![CDATA[<p>We&#8217;re pleased to announce the release of a major update to the polyfill service, with our first CI-validated build, many improved polyfills and 8 new ones, support for callbacks and improvements in our documentation.  This update added 4,883 lines and deleted 2,222 across 196 files.  Here&#8217;s some more detail on the highlights.</p>
<h2>Build: passing!</h2>
<p>In 1.0, we added an extensive test harness and reporting system, and we added tests to a lot of polyfills.  This showed that while a lot of the polyfills worked fine, there were edge cases where they didn&#8217;t.  We&#8217;ve been working to fix those, and with 1.1 we have our first release of a 100% passing build, as well as even more test coverage: 315 tests across 82 browser features, tested in 24 browsers.  That means up to <strong>7,560 tests run on every push</strong>.</p>
<p><figure><img alt='Travis CI showing passing build for polyfill service' src="/wp-content/uploads/2015/01/Screen-Shot-2015-01-08-at-00.04.32.png" width="647" class="alignnone size-full wp-image-12131" srcset="http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-08-at-00.04.32.png 647w, http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-08-at-00.04.32-300x47.png 300w" sizes="(max-width: 647px) 100vw, 647px" /></figure></p>
<p>We also updated the browsers that we use for testing to reflect new releases of Chrome and Firefox.</p>
<h2>More polyfills</h2>
<p>We&#8217;ve added polyfills for more features, based on requests from FT devs and the community, as well as contributions people have made via pull requests.  Here are the new browser features now polyfillable:</p>
<ul>
<li><code>Array.prototype.contains</code></li>
<li><code>Array.prototype.find</code></li>
<li><code>Array.prototype.findIndex</code></li>
<li><code>Element.prototype.cloneNode</code></li>
<li><code>Node.prototype.contains</code></li>
<li><code>screen.orientation</code></li>
<li><code>setImmediate</code></li>
<li><code>WeakSet</code></li>
</ul>
<p>And the following existing polyfills have been improved:</p>
<ul>
<li><code>Array.from</code></li>
<li><code>Array.isArray</code></li>
<li><code>Array.of</code></li>
<li><code>CustomEvent</code></li>
<li><code>DOMTokenList</code></li>
<li><code>Date.prototype.toISOString</code></li>
<li><code>Document</code></li>
<li><code>Element</code></li>
<li><code>Element.prototype.mutation</code></li>
<li><code>Event.DOMContentLoaded</code></li>
<li><code>Event.focusin</code></li>
<li><code>Event.hashchange</code></li>
<li><code>Event</code></li>
<li><code>HTMLDocument</code></li>
<li><code>Object.defineProperty</code></li>
<li><code>Object.keys</code></li>
<li><code>Promise</code></li>
<li><code>String.prototype.repeat</code></li>
</ul>
<h2>More browsers</h2>
<p>We can now recognise and target polyfills at <a href="http://browser.yandex.com/">Yandex browser</a> (aliased to Chrome) and <a href="http://en.wikipedia.org/wiki/Mozilla_Corporation_software_rebranded_by_the_Debian_project#Iceweasel">Iceweasel</a> (aliased to Firefox).  This release also reduces the granularity of our version matching from patch to minor: we&#8217;ve lost the ability to distinguish between version 1.2.3 and 1.2.4 of the same browser &#8211; but we found we have no need to be this granular and limiting variance to the minor level will improve cache performance.</p>
<h2>Callback support</h2>
<p>We now support a <code>callback</code> argument on the query string, to add a function call to the end of the resulting polyfill bundle.  This provides a simple and legacy-compatible way for you to load your own scripts asynchronously but execute them only when the required polyfills have been installed:</p>
<pre class="prettyprint linenums"><code>&lt;script src="//cdn.polyfill.io/v1/polyfill.min.js?callback=init" defer async>&lt;/script>
&lt;script>
  function init() {
    // I only get called when polyfills have been loaded
  }
&lt;/script></code></pre>
<h2>Better feature docs</h2>
<p>We now provide links in our documentation, for each feature, to the polyfill source code and to the test runner to run the test suite.  We also show the minifed size of the polyfill and flag it with a star if it&#8217;s in the default set.</p>
<p><figure><img alt='Polyfill service 1.1 feature matrix' src="/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.31.37.png" width="688" class="alignnone size-full wp-image-12071" srcset="http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.31.37.png 688w, http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.31.37-300x93.png 300w" sizes="(max-width: 688px) 100vw, 688px" /></figure></p>
<p>The visual style of the different indicators in the feature matrix has also been updated to make the distinction clearer and ensure it is visible to colour blind users.</p>
<p>Because Gzipping of a concatenated bundle will compress polyfills by a different amount depending on how many are in the bundle, you can now <a href="https://cdn.polyfill.io/v1/docs/features/#understanding-polyfill-sizes">see the total bundle size</a> of the default feature set in all our test browsers:</p>
<p><figure><img alt='Bundle sizes' src="/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.34.08.png" width="1016" class="alignnone size-full wp-image-12081" srcset="http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.34.08.png 1016w, http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.34.08-300x91.png 300w" sizes="(max-width: 1016px) 100vw, 1016px" /></figure></p>
<h2>No more automatic feature expansion</h2>
<p>Starting with this release the service will no longer auto-expand feature names.  Previously if you requested <code>Array</code> you would get <code>Array.*</code>, but this made it impossible to load just the constructor polyfills for <code>Window</code> and <code>Document</code>.  No requests in the last 7 days had used the service in a way that would have depended on this feature, so we feel we&#8217;re safe to remove it.</p>
<h2>Better debug output</h2>
<p>If you omit the <code>.min</code> from your request path, the comment at the top of the response will now additionally include the full resolved list of features requested.  This should be identical to the value of your <code>features</code> argument (albeit sorted into alphabetical order), and makes it easy to verify that you are receiving the correct response.</p>
<p><figure><img alt='Feature list in debug header' src="/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.34.57.png" width="645" class="alignnone size-full wp-image-12091" srcset="http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.34.57.png 645w, http://labs.ft.com/wp-content/uploads/2015/01/Screen-Shot-2015-01-07-at-23.34.57-300x54.png 300w" sizes="(max-width: 645px) 100vw, 645px" /></figure></p>
<h2>On the way: ES6</h2>
<p>In our next release we hope to support polyfill sources written in ES6 syntax, along with more ES6 features like <code>WeakMap</code>.</p>
<p>If you find the polyfill service useful, we&#8217;d love to hear from you, and we&#8217;d love to get you involved.  You can <a href="http://cdn.polyfill.io/v1/docs/contributing">read more about contributing to the project</a> in the service docs.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Polyfill service 1.0</title>
		<link>http://labs.ft.com/2014/10/polyfill-service-1-0/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=polyfill-service-1-0</link>
		<pubDate>Fri, 31 Oct 2014 00:01:42 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[News]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=11881</guid>
		<description><![CDATA[We just released v1.0 of the polyfill service.  It's taken us a long time to get to this release (well, longer than we had hoped anyway), but we're incredibly proud of it.  Here's a list of all the changes that we've made since our first release.]]></description>
				<content:encoded><![CDATA[<p>We just released v1.0 of the <a href="http://cdn.polyfill.io">polyfill service</a>.  It&#8217;s taken us a long time to get to this release (well, longer than we had hoped anyway), but we&#8217;re incredibly proud of it.  Here&#8217;s what&#8217;s new since our initial release:</p>
<h2>Comprehensive test framework</h2>
<p>We can now test polyfills using both feature detects and test suites, and as part of the service itself, make those tests available for anyone to run in a browser.  We created an automation harness that runs them on <a href="http://saucelabs.com">Sauce Labs&#8217; platform</a>, allowing us to automate the verification of all polyfills in dozens of browsers.</p>
<p><figure><img alt='Sauce Labs test results' src="/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.22.50.png" width="669" class="alignnone size-full wp-image-11901" srcset="http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.22.50.png 669w, http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.22.50-300x162.png 300w" sizes="(max-width: 669px) 100vw, 669px" /></figure></p>
<p>With this in place we can be super-confident about accepting contributions from the community, because the tests are run automatically via Travis CI on every pull request.  Running tests on 20 different browsers takes a while, but the confidence to merge fixes to polyfills is well worth the wait.</p>
<h2>Better docs</h2>
<p>With the improved tests, we had a ton of new stuff to add to the docs, so we separated the docs into pages, added a better intro page with quick start code, and added a feature matrix so you can see at a glance which features we support, and in which browsers:</p>
<p><figure><img alt='Feature matrix' src="/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-17.49.05.png" width="853" class="alignnone size-full wp-image-11891" srcset="http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-17.49.05.png 853w, http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-17.49.05-300x97.png 300w" sizes="(max-width: 853px) 100vw, 853px" /></figure></p>
<p>This is populated from the automated tests, so is kept up to date automatically as we add, update and fix polyfills.</p>
<h2>Usage stats</h2>
<p>Our docs now also include stats we&#8217;re pulling from Fastly and Pingdom to show you much the service is being used, its average response time and whether we have had any outages (so far, no downtime!).</p>
<p><figure><img alt='Polyfill service usage stats' src="/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.25.49.png" width="1016" class="alignnone size-full wp-image-11911" srcset="http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.25.49.png 1016w, http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.25.49-300x203.png 300w" sizes="(max-width: 1016px) 100vw, 1016px" /></figure></p>
<p>These are nice to look at but also help show the fruits of our efforts to be <a href="http://labs.ft.com/2014/10/caching-user-agent-specific-responses-with-fastly/" title="Caching User-Agent specific responses with Fastly">smarter about caching UA-varying responses</a>, which we do using some clever custom VCL on the Fastly CDN.</p>
<h2>Contribution guide</h2>
<p>We also added a <a href="http://cdn.polyfill.io/v1/docs/contributing">detailed contributor guide</a> for anyone that wants to add to or improve the polyfill set.  And to encourage people to help out, we&#8217;re giving away <strong>free premium access to FT content</strong> for any contributors who have a PR merged (currently any contribution qualifies, but we may add qualifying criteria in future).  As well as our news content this includes all our columnists, arts and travel, and lots more.  It retails for $50 a month.</p>
<h2>Variants</h2>
<p>Finally, we came up with a smarter way of doing variants.  Polyfilling the same feature in two different browsers can sometimes require two different implementations, and we previously supported this by simply having two polyfills, with the browser as a suffix, like <code>Element.prototype.matches.moz</code>.  But this is complicated when users can request a feature by name, and also when different variants have different dependencies, which may also be browser specific.</p>
<p>Instead, we now have variations within each feature config, so that all variants can share the same name, the same detect and the same test suite, but have different implementations per browser.  We can also use canonical names for dependencies.</p>
<p><figure><img alt='Variants config' src="/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.31.42.png" width="662" class="alignnone size-full wp-image-11931" srcset="http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.31.42.png 662w, http://labs.ft.com/wp-content/uploads/2014/10/Screen-Shot-2014-10-30-at-18.31.42-300x194.png 300w" sizes="(max-width: 662px) 100vw, 662px" /></figure></p>
<h2>Try it</h2>
<p>It&#8217;s great to have got to our 1.0 release.  Give it a go, give us some feedback, and if you can, get involved.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Caching User-Agent specific responses with Fastly</title>
		<link>http://labs.ft.com/2014/10/caching-user-agent-specific-responses-with-fastly/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=caching-user-agent-specific-responses-with-fastly</link>
		<pubDate>Sat, 04 Oct 2014 11:49:59 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[Technote]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=11651</guid>
		<description><![CDATA[The new FT Polyfill service uses the Fastly CDN to provide faster and more reliable access to Polyfills for everyone.  But with responses varying by user-agent, it's a caching nightmare.  We set out to fix this with a little help from Fastly and custom Varnish VCL.]]></description>
				<content:encoded><![CDATA[<p class='standfirst'>The new <a href='https://cdn.polyfill.io'>FT polyfill service</a> uses the Fastly CDN to provide faster and more reliable access to Polyfills for everyone.  But with responses varying by user-agent, it&#8217;s a caching nightmare.  We set out to fix this with a little help from Fastly&#8217;s engineers and custom Varnish VCL.</p>
<p>There is so much variety in the User-Agent header that many will only be seen once.  The website <a href='http://useragentstring.com'>UserAgentString</a> identifies over 11,000 unique user agent strings, and in fact that&#8217;s a huge underestimate (a friend at Akamai told me that they see millions of unique values <em>every day</em>).  Worse, they&#8217;re impossible to trivially analyse:</p>
<figure id="attachment_11741" class="wp-caption alignnone"><img alt='Windows Phone 8.1 IE user agent' src="/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-19.12.42.png" width="1148" class="size-full wp-image-11741" srcset="http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-19.12.42.png 1148w, http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-19.12.42-300x45.png 300w, http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-19.12.42-1024x153.png 1024w" sizes="(max-width: 1148px) 100vw, 1148px" /><figcaption class="wp-caption-text">Well, this is depressing.</figcaption></figure>
<p>The problem is exacerbated because each request can list any combination of polyfills that it wants, which means that if your site wants a unique combination of polyfills, you will not benefit from anything we&#8217;ve already cached for other users.  And since we often release fixes for polyfills, we can&#8217;t even cache the responses for a very long time.</p>
<p>That&#8217;s not good enough.</p>
<h2>Varnish to the rescue</h2>
<p><a href='https://www.fastly.com'>Fastly</a> are kindly sponsoring the traffic to the FT polyfill service, and I spent some time in the Fastly office in San Francisco last week trying to solve the problem &#8211; to improve reliability and performance for all users of the service.  One of the great features of Fastly (currently poorly documented, though they assure me they&#8217;re working on it!) is the ability to write your own routing logic to run on their edge servers.  Fastly uses <a href='https://www.varnish-cache.org/'>Varnish</a>, a fantastic open source high performance cache, and it has a straightforward configuration language called VCL (Varnish Configuration Language) which we already use extensively at the FT.</p>
<p>As it turns out, we can use some custom VCL to improve cache performance by separating the user agent from the list of polyfills to be included.</p>
<h2>Step 1: normalisation API</h2>
<p>First, I added an endpoint to the polyfill service API, to convert raw user agent strings into normalised ones, using the <a href='https://www.npmjs.org/package/useragent'>useragent</a> npm module (this is based on <a href='http://www.browserscope.org'>browserscope</a>, written by Steve Souders, who coincidentally is now at Fastly).  It works like this:</p>
<pre class='prettyprint lang-plain'><code>GET /v1/normalizeUa?ua=Mozilla/5.0%20(Macintosh;%20Intel%20Mac%20OS%20X%2010_9_2)%20AppleWebKit/537.37%20(KHTML,%20like%20Gecko)%20Chrome/37.0.2062.120%20Safari/537.40 HTTP/1.1
Host: cdn.polfill.io
Accept: */*

HTTP/1.1 200 OK
Cache-Control: public, max-age=31536000, stale-if-error=32140800
Normalized-User-Agent: chrome%2F37.0.2062
</code></pre>
<p>You submit a raw User-Agent, and get back a normalised one (there are a few other headers in the response that aren&#8217;t relevant here, so I left them out).  The important parts of the response are:</p>
<ul>
<li>The <code>Cache-Control</code> header makes the response fresh for a year, and if the normalisation API goes down, stale responses can continue to be used for up to another year.  This means that future requests with the same user agent within a year will hit the cached response instantly.</li>
<li>The <code>Normalized-User-Agent</code> header specifies the normalised identifer string derived from the submitted UA.  This is returned as a header, not as body content, and is URL-encoded, both to make it easier to work with in Varnish.</li>
</ul>
<p>It&#8217;s important that this normalisation is done by the backend app, not in Varnish itself, because although it would be faster to run in Varnish, it would be virtually impossible to keep the normalisation rules in sync between the backend application and varnish, and the consequences of Varnish normalising user-agents differently to the backend is pretty hideous.</p>
<h2>Step 2: Write some custom VCL</h2>
<p>Now we need to override Fastly&#8217;s default behaviour, to enable normalising of requests before passing them to the backend.  I created an empty text file and wrote this:</p>
<pre class="prettyprint linenums"><code>sub vcl_recv {
  
  # Template tag for rules created in the Fastly UI
  #FASTLY recv

  # Standard Fastly boilerplate (must be included to avoid wiping it out)
  if (req.request != "HEAD" && req.request != "GET" && req.request != "FASTLYPURGE") {
    return(pass);
  }

  # If request is to the polyfill endpoint and does not specify a UA on the query string
  if (req.url ~ "^/v1/polyfill." && req.url !~ "[?&]ua=") {

    # Remember the original request in a header (no variables in Varnish) and rewrite the request as a UA normalisation lookup
    set req.http.X-Orig-URL = req.url;
    set req.url = "/v1/normalizeUa?ua=" urlencode(req.http.User-Agent);
  }

  # Pass the request on to the next stage in the Varnish workflow - the cache lookup
  return(lookup);
}</code></pre>
<p>The <code>sub vcl_recv</code> is the definition of one of the standard <a href='https://www.varnish-cache.org/docs/2.1/tutorial/vcl.html#vcl-recv'>Varnish workflow steps</a>.  Recv is the first stage which runs when Varnish first receives a request.</p>
<p>There are a few specifics peculiar to Fastly.  <code>FASTLY recv</code> is a template tag that Fastly replaces with any config that you&#8217;ve set up using their <a href="https://app.fastly.com">admin UI</a>.  I thought this would also be where standard Fastly VCL goes, but actually it is only used to add stuff you configure yourself in the admin tool, so if you haven&#8217;t done anything in the UI, it&#8217;ll get replaced with an empty string.</p>
<p>The checks for <code>HEAD</code>, <code>GET</code>, and <code>FASTLYPURGE</code> are the standard Fastly VCL for the <code>vcl_recv</code> function.  A bit counterintuitively, you have to include this code in your own VCL in order to avoid wiping it out when you upload your own config.</p>
<p>The second <code>if</code> statement is the logic I have added.  It says if the request URL is the polyfill bundle endpoint, and the request does not include a <code>ua</code> parameter, copy the URL into a header on the request (so we can remember it, because Varnish doesn&#8217;t have variables).  Then replace the URL with the normalise endpoint.  We also have to URL encode the User-Agent, for which Fastly have a built-in function (which isn&#8217;t part of regular VCL).</p>
<p>Finally, we <code>return(lookup)</code> which instructs Varnish to try and find the specified resource in the cache. If the request was a bundle request, it&#8217;s now become a normalisation one so that&#8217;s what gets looked up.</p>
<p>The lookup may succeed or not, and if it doesn&#8217;t Varnish will emit a backend request to the Node app to fetch the resource.  Either way, the next step on the Varnish workflow that we&#8217;re interested in is <code>vcl_deliver</code>.  This happens when Varnish has got a response, either from cache or freshly from the backend, and is ready to deliver it to the end user.</p>
<pre class="prettyprint linenums"><code>sub vcl_deliver {

	# Include any VCL generated from the Fastly UI
	#FASTLY deliver

	if (req.url ~ "^/v1/normalizeUa" && req.http.X-Orig-URL && resp.status == 200) {
		set req.http.Fastly-force-Shield = "1";
		if (req.http.X-Orig-URL ~ "?") {
			set req.url = req.http.X-Orig-URL "&ua=" resp.http.Normalized-User-Agent;
		} else {
			set req.url = req.http.X-Orig-URL "?ua=" resp.http.Normalized-User-Agent;
		}
		restart;
	} else if (req.url ~ "^/v1/polyfill..*[?&]ua=" && req.http.X-Orig-URL && req.http.X-Orig-URL !~ "[?&]ua=") {
		set resp.http.Vary = "Accept-Encoding, User-Agent";
	}
	return(deliver);
}</code></pre>
<p>I added this to the same file as the vcl_recv function.  Again we are defining the function and allowing Fastly to insert any VCL generated from settings we create in the admin UI (with <code>#FASTLY deliver</code>).  Then:</p>
<ul>
<li>If the URL being delivered is the normalise endpoint, the response is <code>200 OK</code>, and we have a record of an original URL (ie. the request from the end user wasn&#8217;t <em>for</em> the normalise endpoint), then we need to restart the request with the original URL:
<ul>
<li>Setting <code>Fastly-force-Shield</code> ensures the restarted request can take advantage of Fastly&#8217;s clustering behaviour (a bit weird)</li>
<li>The original URL is reinstated, with an additional query param added to carry the normalised user agent</li>
<li>The request is restarted, which returns us to <code>vcl_recv</code></li>
</ul>
</li>
<li>If the URL being delivered is a polyfill bundle which was originally requested without a <code>ua</code> param, add a <code>Vary</code> header to the response, since downstream caches which don&#8217;t have our special logic will need to store a separate entry for each user-agent</li>
<li>Finally, we tell Varnish that it&#8217;s OK to deliver the response (we&#8217;ll only get to this point if we haven&#8217;t restarted)</li>
</ul>
<h2>Step 3: Upload it</h2>
<p>Now I can upload the finished VCL to Fastly&#8217;s admin UI:</p>
<p><figure><img alt='Fastly VCL upload UI' src="/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-18.23.53.png" width="994" class="alignnone size-full wp-image-11671" srcset="http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-18.23.53.png 994w, http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-18.23.53-300x94.png 300w" sizes="(max-width: 994px) 100vw, 994px" /></figure></p>
<ol>
<li>Log in at <a href='https://app.fastly.com'>https://app.fastly.com</a></li>
<li>Click configure, and choose the correct app if you have more than one (I have both a live and a test version of the polyfill service, which is a common pattern)</li>
<li>Click VCL, and then New</li>
<li>Type a name like &#8216;UA Normalise&#8217;, and select the vcl file from disk</li>
<li>Click create, then activate the new VCL</li>
</ol>
<h2>Step 4: Try it out</h2>
<p>Now, let&#8217;s make a request and see what happens:</p>
<pre class='prettyprint lang-plain'><code>GET /v1/polyfill.js?features=Array.from HTTP/1.1
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.37 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.41

HTTP/1.1 200 OK
Cache-Control: public, max-age=86400, stale-while-revalidate=604800, stale-if-error=604800
Content-Type: application/javascript; charset=utf-8
Access-Control-Allow-Origin: *
Content-Length: 201
Age: 0
X-Served-By: cache-lcy1120-LCY
X-Cache: MISS
X-Cache-Hits: 0
Vary: Accept-Encoding, User-Agent

/* Polyfill bundle includes the following polyfills.  For detailed credits
 * and licence information see http://github.com/financial-times/polyfill-service.
 *
 * Detected: chrome/37.0.2162
 *
 */
</code></pre>
<p>This response tells us that:</p>
<ul>
<li>We got served by <code>cache-lcy1120-LCY</code>, a Fastly node somewhere in the City of London</li>
<li>The resource was not in cache so was fetched from the backend</li>
<li>It&#8217;s fresh for 24 hours, and after that can be used stale for up to a week to allow asynchronous revalidation via the <a href="http://tools.ietf.org/html/rfc5861">stale-while-revalidate</a> directive.  This is really cool, because it means that probably once a request from an end user has had to wait on a backend once, it will probably never have to do so again, and yet any changes to the polyfills will get into the cache</li>
<li>It&#8217;s also fine to serve a stale response for up to a week if the backend is down, via the stale-if-error directive</li>
<li>The <code>Vary</code> header includes <code>User-Agent</code> because our request did not specify a <code>ua</code> parameter.</li>
</ul>
<p>This is what showed up in the web server logs:</p>
<pre class="prettyprint linenums"><code>2014-09-25T00:43:15.778324+00:00 heroku[router]: at=info method=GET path="/v1/normalizeUa?ua=Mozilla/5.0%20(Macintosh;%20Intel%20Mac%20OS%20X%2010_9_2)%20AppleWebKit/537.37%20(KHTML,%20like%20Gecko)%20Chrome/37.0.2062.120%20Safari/537.41" status=200 bytes=240
2014-09-25T00:43:15.865318+00:00 heroku[router]: at=info method=GET path="/v1/polyfill.js?features=Array.from&ua=chrome%2F37.0.2062" status=200 bytes=521</code></pre>
<p>Notice how neither of the requests that hit the backend matches the URL we actually requested.  The first is the normalise request, which receives the full raw UA string, and returns a normalised one (which we can&#8217;t see in the log).  Then a new request is made that adds the normalised UA to the original request URL.</p>
<p>If we send the request again, modifying the user agent, the backend gets one request &#8211; the normalise call for the new user agent string.  If instead we change the list of features we want polyfills for, the backend also gets one request: for the new bundle.</p>
<h2>Conclusions</h2>
<p>Using VCL, you can write some pretty complex logic to run on the edge if you&#8217;re using Fastly.  But there are some shortcomings in the documentation, so you may need to ask for help.  Here are some things I learned along the way:</p>
<ul>
<li>Not all responses are cached by default.  Fastly only caches 200, 203, 300, 301, 302, 410 and 404s.  You can change this behaviour in custom VCL, but it&#8217;s worth knowing <a href="http://docs.fastly.com/guides/caching/which-http-responses-are-cached-by-default">what the defaults are</a>.  I was trying to serve <code>204 No Content</code> responses from the normalise endpoint, and wondering why that didn&#8217;t work.</li>
<li>At time of writing the docs say you have to override <em>all</em> the VCL functions if you are going to override any of them.  This seems to be a mistake in the docs.</li>
<li>If you override <code>vcl_fetch</code>, the behaviour on Fastly will not be the same as if you run your own Varnish, because Fastly runs <code>fetch</code> on a different server to the one it runs <code>recv</code> and <code>deliver</code> on.  This allows them to scale their infrastructure but means some stuff you set in <code>vcl_fetch</code> gets wiped out.  I found it easier to stick to the &#8216;client&#8217; side of the divide, but this would benefit from being documented.</li>
<li>If you send a <code>HEAD</code> request instead of a <code>GET</code> (easy to do by accident in cURL by adding a <code>-I</code> flag) this disables Fastly&#8217;s in-POP clustering, which means that you&#8217;ll find it hard to get a cache hit, because every time you send a request you&#8217;ll likely hit a different node. With clustering on, the resource can be anywhere in the POP and you&#8217;ll score a hit.  There are some other <a href="http://docs.fastly.com/guides/caching/what-is-the-default-caching-behavior-of-http-verbs-other-than-get">differences between GET and other HTTP verbs</a> explained in the docs.</li>
<li>You can only restart 3 times.  In this particular use case I only need to restart a maximum of once, but it&#8217;s worth knowing that the fourth restart will fail and the content will be delivered anyway.  This is now mentioned on the <a href="http://docs.fastly.com/guides/vcl-faqs/how-do-i-mix-and-match-fastly-vcl-with-custom-vcl">custom VCL guide</a>.</li>
<li>Almost all functions that do normalisation in most programming languages spell it with a z, so in resigned acceptance of our American cousins&#8217; defacto victory over the use of English in syntax, the API for the service spells it with a z.  But of course in this post I&#8217;ve spelled it with an S.  So there.</li>
</ul>
<p>As for the polyfill service, we&#8217;re now enjoying a near perfect cache-hit ratio!</p>
<p><figure><img alt='Cache hit ratio for polyfill service in  September 2014' src="/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-18.36.24.png" width="951" class="alignnone size-full wp-image-11691" srcset="http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-18.36.24.png 951w, http://labs.ft.com/wp-content/uploads/2014/09/Screen-Shot-2014-09-27-at-18.36.24-300x60.png 300w" sizes="(max-width: 951px) 100vw, 951px" /></figure></p>
]]></content:encoded>
			</item>
		<item>
		<title>Not everything is awesome</title>
		<link>http://labs.ft.com/2014/08/not-everything-is-awesome/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=not-everything-is-awesome</link>
		<pubDate>Mon, 11 Aug 2014 07:30:05 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[Opinion]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=11181</guid>
		<description><![CDATA[The 'cult of awesome' that too frequently crops up in the technology industry is a problem and it breeds a culture of egos and aggrandising that can be self defeating.  We set out to improve the way we communicate in the community, and how we hire the best people.]]></description>
				<content:encoded><![CDATA[<p class='standfirst'>I am not awesome. I am not a rockstar, superstar, ninja, or guru either.  The &#8216;cult of awesome&#8217; that too frequently crops up in the technology industry is a problem and it breeds a culture of egos and aggrandising that can be self defeating.</p>
<p>I recently updated the <a href='/jobs'>FT Labs jobs page</a> (go look at it, it&#8217;s nice!), and asked a number of people I respect for their opinion. Specifically I was concerned about the lack of diversity in our applicants, and I wanted a number of perspectives on how we might improve the wording to make it more appealing to a broader range of people.  It wasn&#8217;t a quantity issue &#8211; plenty of people do apply to work at Labs, but we want to hire the best people for the job, and that means making sure we don&#8217;t put anyone off unintentionally.</p>
<p>Two people said the same thing in two different ways, and it resonated with me because I agreed with their principle wholeheartedly and was surprised to think that a job ad I wrote could suffer from this problem.  Here&#8217;s the offending sentence:</p>
<blockquote><p>Working at FT Labs is a commitment to drive yourself beyond your own expectations</p></blockquote>
<p>It was pointed out that people who perhaps are nervous of their capabilities or their potential, might find it off-putting that we were potentially a boiler-house of pressure to constantly excel, which we&#8217;re not.  As the first line of a page trying to sell jobs at the FT, it seems to prioritise performance above all else.</p>
<p>In fact, someone might be the very best engineer in the world, but I wouldn&#8217;t want to hire them if they have a lousy attitude to collaboration, a superiority complex or no interest in the product.</p>
<p>It reminded me of other ads I&#8217;ve seen that I instantly dislike, like this which also comes from an FT ad:</p>
<blockquote><p>Requirements: You are a software development superstar, &#8230;</p></blockquote>
<p>I know I will almost certainly dislike anyone who thinks this describes them.  Unfortunately we often write job ads thinking about how we&#8217;d describe the person we want to hire, not how someone like that would describe themselves.  So it&#8217;s understandable that you describe them in glowing terms, but it&#8217;s actually not helpful.</p>
<p>I thought about this, and reworded my ad:</p>
<blockquote><p>Being part of the FT Labs team is a commitment to push yourself and those around you to do better, constantly adapt and learn new technologies, and be able to apply yourself to any challenge, whether you&#8217;re just starting out or a veteran of the industry.</p></blockquote>
<p>Wordy.  But I like it a lot more.  We still want people to aspire to work hard and produce great results, but the focus has shifted from the individual to their place in the team, and includes a reminder that commitment and enthusiasm and talent does not necessarily require experience or even a lot of expertise.</p>
<h2>Superstars are a pain</h2>
<p>As much as it&#8217;s irritating to see these &#8216;performance superlatives&#8217; used in job ads, it&#8217;s also just plain hilarious to imagine what it would be like to <em>literally</em> hire one.</p>
<ul>
<li><strong>Rockstar</strong>: Music would be too loud. And think of the tantrums.  Would refer all pull request comments to their agent.</li>
<li><strong>Guru</strong>: Code would probably be indecipherable.  Solutions would work but no-one would understand how.  For no apparent reason documentation would only make sense when incanted.</li>
<li><strong>Ninja</strong>: Would you even know if you had hired a ninja?  At least they probably wouldn&#8217;t use much desk space.</li>
<li><strong>Superstar</strong>: The entourage would get in the way, and red carpet is hard to clean.</li>
</ul>
<h2>Everything is not awesome</h2>
<p>If the above list are some of the most misused words in tech recruitment, <em>awesome</em> goes straight to the top.  <a href='http://www.thelegomovie.com/'>The LEGO movie</a> demonstrates just how ridiculous its usage has become.  There are very few things in everyday life that are deserving of true awe, and even fewer people.  I think I&#8217;d say I&#8217;ve met no more than five people I would describe as awesome, though I&#8217;ve seen many more <em>things</em> that are.  The opening ceremony of London 2012, for example, was awesome.  The fact that I am willing to pick up a sandwich for you on my way past Sainsbury&#8217;s, is not.</p>
<h2>Sweating the details</h2>
<p>As well as re-orienting the main focus of our ads, there are lots of other, tiny things that help to make an ad more inclusive, and again it comes down to imagining how a candidate would describe themselves, not how you think of them or even how you think of yourself.  In our flexible working section, we had an example of how you might want to adjust start and end times to accommodate a sports schedule.  It now also <strong>includes the example of a nursery or school run</strong>.</p>
<p>It&#8217;s worth asking someone very different to you to try to find language that you&#8217;ve added without thinking about it that just reflects your own experience.</p>
<h2>Surprise! It works.</h2>
<p>I made these changes a couple of weeks ago, and since then we&#8217;ve had a noticeable uptick both in the number and diversity of applications, and many applicants are quoting the new bits of the job ad at me when I ask them what prompted them to apply.</p>
<p>If you&#8217;re looking for a new job as a web developer and you are not sure whether you&#8217;d be up to it, try us anyway.  We can only say no (politely), and no-one ever gets anywhere without trying.  If we find someone who really is awesome, they probably won&#8217;t think that of themselves.  And if you had a chance to ask the person you most admire how they got to where they are, chances are the ultimate answer is, &#8220;I applied&#8221;.  </p>
]]></content:encoded>
			</item>
		<item>
		<title>Do we really need to hide the URL?</title>
		<link>http://labs.ft.com/2014/05/do-we-really-need-to-hide-the-url/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=do-we-really-need-to-hide-the-url</link>
		<pubDate>Sun, 11 May 2014 23:15:21 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[Opinion]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=10601</guid>
		<description><![CDATA[Google recently started experimenting with hiding the URL in Chrome and replacing it with an “Origin chip”, which seems a bit scary.  There's a lot of sense to this, but ultimately it's a bad idea.]]></description>
				<content:encoded><![CDATA[<p class='standfirst'>Google recently started experimenting with <a href="http://www.pcworld.com/article/2150857/googles-canary-browser-flirts-with-killing-urls.html">hiding the URL in Chrome</a> and replacing it with an “Origin chip”, which seems a bit scary.  Jake Archibald thinks this is a great idea, so does Nicholas Zakas.  And they’re both pretty smart, so there must be something in this.</p>
<p><figure><img alt='Origin chip on FT.com' src="/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.47.03.png" width="1005" class="alignnone size-full wp-image-10721" srcset="http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.47.03.png 1005w, http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.47.03-300x79.png 300w" sizes="(max-width: 1005px) 100vw, 1005px" /></figure></p>
<p>I’m late to the party here intentionally, because it gives me the luxury of rounding up what everyone else who is cleverer than me has already said.  There seem to be two major arguments in favour:</p>
<ul>
<li><strong>Security:</strong> it helps to thwart phishing by making it harder to be fooled into thinking you’re on a site that you’re not (because the browser will show just the hostname, rather than the full URL).  See <a href="http://jakearchibald.com/2014/improving-the-url-bar/">Jake’s post</a> for this argument.</li>
<li><strong>User experience:</strong> URLs suck anyway.  They’re just routing information, and normal people / non-geeks don’t care about routing information.  In fact many users never use them, preferring to find every web page via search.  <a href="http://www.nczonline.net/blog/2014/05/06/urls-are-already-dead/">Nicholas’s post</a> makes this argument pretty well.</li>
</ul>
<p>Amongst the detractors, we have Jeremy Keith, who <a href="http://adactio.com/journal/6779/">addresses the security argument </a>by concluding that:</p>
<blockquote><p>Technically decapitation seems to solve a headache</p></blockquote>
<p>I strongly agree with the sentiment here.  Let’s not forget that the web community has form for ‘solving’ problems and then realising that <a href="http://alistapart.com/article/application-cache-is-a-douchebag">the solution is itself a larger problem</a> than the one it solved.</p>
<p>So, does origin chip achieve its aims without introducing any new problems?  No.   And, is it the best solution to these problems?  No again.  In summary:</p>
<ul>
<li>It doesn’t actually solve the security problem (people will still fall for phishing)</li>
<li>There are better solutions to both the phishing problem and the UX</li>
<li>There are negative side effects:
<ul>
<li>Developers stop caring about making their URLs semantic</li>
<li>Users find it harder to disambiguate websites with similar names (the “Facebook login” problem &#8211; more info below)</li>
<li>The UI creates false assumptions about the way it works</li>
</ul>
</li>
</ul>
<h2>Security</h2>
<p>If the problem is that people get duped into thinking they’re on a site that they’re not, here’s a better solution for you that I think will save more people than origin chip: When a user visits a page that is not in their history, and submits a form containing a password field, display a browser-generated page that shows the hostname, any security information or advisories associated with it, and the information being submitted, warns about phishing and asks the user to verify that they want to proceed.</p>
<p>In the early days of the web, Internet Explorer actually had something like that, displayed whenever you submitted anything over HTTP:</p>
<p><figure><img alt='Classic IE form submit warning' src="/wp-content/uploads/2014/05/SendInfoOnWeb.gif" width="354" class="alignnone size-full wp-image-10621" /></figure></p>
<p>But since we do that all the time, everyone would tick the ‘don’t display this again’ box and it was eventually removed from later versions of the browser.  Doing this in a smarter way would lead to far fewer false positives and give the user a reason to read it and consider it.</p>
<p>Here’s an illustration, which also showcases my amazing design skills:</p>
<p><figure><img alt='Form submit warning mockup' src="/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.14.20.png" width="795" class="alignnone size-full wp-image-10611" srcset="http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.14.20.png 795w, http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.14.20-300x135.png 300w" sizes="(max-width: 795px) 100vw, 795px" /></figure></p>
<p>I’d also argue that warning about the phishing at the form-submit stage is far more more likely to catch the user’s attention that badging the URL, no matter how flashy you make it.</p>
<p>Since solutions like this exist, it’s not surprising that <a href="http://jakearchibald.com/2014/improving-the-url-bar/#comment-1369124397">the conspiracy brigade are busy</a> accusing Google of finding excuses to promote search over using URLs.</p>
<h2>User experience</h2>
<p>Lets look at the user experience issues.  <a href="http://www.nczonline.net/blog/2014/05/06/urls-are-already-dead/">Nicholas Zakas says</a> people don’t want routing information.  But it’s a myth that normal users don’t understand routing and disambiguation.  After all, they’re aren’t many people who would struggle to put an address on a letter.  And they know to put their address lines in order of most to least granular because they recognise that there’s a hierarchy to the data structure of a geographic address.</p>
<figure id="attachment_10631" class="wp-caption alignnone"><img alt='Royal Mail's guidance on how to address an envelope' src="/wp-content/uploads/2014/05/Address_portugal.gif" width="448" class="size-full wp-image-10631" /><figcaption class="wp-caption-text">Royal Mail&#8217;s guidance on how to address an envelope</figcaption></figure>
<p>On the web, there have been lots of efforts to simplify routing &#8211; <a href="http://help.aol.com/help/microsites/microsite.do?cmd=displayKC&amp;docType=kc&amp;externalId=217664">AOL keywords</a>, facebook and twitter usernames, and advertisers whose SEO enables them to just put “<a href="http://www.fabricoffolly.com/2009/05/search-online-for-return-of-keywords-in.html">Search online for X</a>” on the poster rather than the URL.  But all of these mechanisms are run by and for the benefit of single corporations or are highly competitive fights over ownership of a highly ambiguous common term in a single global namespace.</p>
<p>We need good, robust, inclusive, scalable routing mechanisms, and URLs are that.  Users need a way of using them that doesn’t require remembering or typing all the routing info.  It’s important that when I say I want “Amazon” I get <code>http://www.amazon.co.uk</code>, not <code>http://www.amazon.com</code> (even when I’m travelling in the US), but equally important that I can easily decide to go to the other one if I want to.</p>
<p>EMail is the same.  There must be thousands of John Smiths in the world, but I probably only know two or three at the most.  If I type an email to “John Smith”, I should not need to enter routing info if I’m writing to the one I correspond with most frequently, but I need to understand the routing so that if I actually wanted a different one, I can identify the difference and pick the right recipient:</p>
<figure id="attachment_10671" class="wp-caption alignnone"><img alt='Disambiguating via routing info' src="/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.30.29.png" width="587" class="size-full wp-image-10671" srcset="http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.30.29.png 587w, http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-23.30.29-300x113.png 300w" sizes="(max-width: 587px) 100vw, 587px" /><figcaption class="wp-caption-text">Disambiguating via routing info</figcaption></figure>
<p>The changes to Chrome are a poor user experience for this reason &#8211; they obscure the routing information which encourages users to ignore it and developers to stop bothering with semantic URLs.  Finally, it even creates a confusing search experience: if I click in the omnibox while on the BBC news site, I get:</p>
<p><figure><img alt='BBC News with origin chip enabled' src="/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-16.27.59.png" width="676" class="alignnone size-full wp-image-10641" srcset="http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-16.27.59.png 676w, http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-16.27.59-300x31.png 300w" sizes="(max-width: 676px) 100vw, 676px" /></figure></p>
<p>This strongly suggests I will be searching the BBC news site when I start typing.  It’s a common UI pattern used all over the web.  Here’s Amazon doing it for their product search:</p>
<p><figure><img alt='Amazon product search shows a similar UI to Origin Chip' src="/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-16.33.52.png" width="806" class="alignnone size-full wp-image-10651" srcset="http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-16.33.52.png 806w, http://labs.ft.com/wp-content/uploads/2014/05/Screen-Shot-2014-05-11-at-16.33.52-300x36.png 300w" sizes="(max-width: 806px) 100vw, 806px" /></figure></p>
<p>The problem is that in Chrome’s case the ‘origin chip’ vanishes as soon as you press a key, leaving you with a global search and forcing you to realise that your instinctive understanding of how the UI works was wrong.  Horrible.</p>
<p>Jake points out that <a href="http://readwrite.com/2010/02/10/facebook_wants_to_be_your_one_true_login">a read/write article</a> caused confusion by briefly becoming the top Google result for ‘Facebook login’, showing that people don’t want to use URLs, but rather they find things by searching.  To me all that says is that search is a popular way to find stuff (I think we knew that), and maybe Facebook should consider including the word ‘login’ in the title of their login page.  It doesn’t make the URL any less important as the canonical identifier of the right page.  In the Facebook example, if you hide away the URLs surely the problem gets worse, because future search anomalies such as this one will cause even more users to be confused than it did four years ago with the read/write article.</p>
<h2>Wrapping up</h2>
<p>In summary, this change is bad because it’s a poor solution to problems where better solutions exist, and it creates new problems that we don’t currently have.  It is however fantastic that these kinds of experiments are done in public, and Google deserves nothing but mountains of credit and admiration for that.</p>
<p>Other browser vendors would do well to follow this great example.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Edge 3: back in London</title>
		<link>http://labs.ft.com/2014/03/edge-3-back-in-london/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=edge-3-back-in-london</link>
		<pubDate>Sun, 30 Mar 2014 15:59:43 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[News]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=9781</guid>
		<description><![CDATA[Discussions of Web components, accessibility and tools and build processes dominated the third Edge conference, which we hosted at Microsoft's office in central London.  Read about the topics, coverage from the delegates and feedback on the event.]]></description>
				<content:encoded><![CDATA[<p class='standfirst'>Last Friday, I hosted the third edition of our <a href='http://edgeconf.com/2014-london'>Edge conference</a> at Microsoft&#8217;s Cardinal Place office complex in central London.  We created some fantastic content, kicked off some deep and meaningful blog posts and discussions, got insightful feedback and, er, I learnt a lot about corporate network restrictions.</p>
<figure id="attachment_9791" class="wp-caption alignnone"><img alt='Developer tools panel at Edge 3: Pavel Feldman, Narciso Jaramillo, Jake Archibald, Joe Walker, Kenneth Auchenberg, Henri Bergius' src="/wp-content/uploads/2014/03/panel.jpg" width="1000" class="size-full wp-image-9791" srcset="http://labs.ft.com/wp-content/uploads/2014/03/panel.jpg 1000w, http://labs.ft.com/wp-content/uploads/2014/03/panel-300x112.jpg 300w" sizes="(max-width: 1000px) 100vw, 1000px" /><figcaption class="wp-caption-text">Developer tools panel at Edge 3: Pavel Feldman, Narciso Jaramillo, Jake Archibald (moderator), Joe Walker, Kenneth Auchenberg.</figcaption></figure>
<p>Big thanks are due to <a href='http://www.thebeebs.co.uk/'>Martin Beeby</a> and his colleagues for contributing their time and Microsoft&#8217;s resources to make this very specialised event happen.</p>
<p>This time around we ran sessions on Components, Developer tooling, Build process, Page load performance, Pointers and interactions, Accessibility and Future web.  I won&#8217;t cover all the content that came out of these individually &#8211; for that see our official <strong>real-time session notes</strong> linked from each session on the <a href='http://edgeconf.com/2014-london/schedule'>schedule page</a> (or <a href='http://www.steveworkman.com/html5-2/standards/2014/notes-from-edge-conf-2014-london/'>Steve Workman&#8217;s session notes</a>) &#8211; but many points discussed grew into larger discussions after the event and are worth focusing on.  For me the thread that draws them all together is the relative power, speed and complexity of web development, and how it is affected by the choices you make as a developer as well as the state of the technologies in the ecosystem.</p>
<h2>Three unsexy pillars of web development</h2>
<p><strong>Paul Lewis&#8217;s</strong> follow up post <a href='http://aerotwist.com/blog/web-components-and-three-unsexy-pillars/'>Web Components and three unsexy pillars</a> highlighted dull-but-critical parts of web development practice: accessibility, security and performance.  All three topics came up very early on, since when we build UI into components, all these concerns shift from the page to the component level.  This resonated strongly with me &#8211; you can easily build two things that are identical from a feature/product standpoint, but which are architecturally like comparing a Jaguar with a <a href='http://en.wikipedia.org/wiki/Milk_float'>milk float</a>.</p>
<p>Thing is, there&#8217;s a sense of perspective to apply here &#8211; there&#8217;s no point building a Jaguar if you are going to use it to deliver milk and you need to stop every 50 yards.  Still, most of us are building at least one or two grown-up things that we hope might get a billion users or so, and these pillars are worth building into your instinctive practice.</p>
<h2>Tooling</h2>
<p>That practice is coming to be defined, at least in large part, by the tools that you use.  <strong>Paul Irish</strong> did his characteristic <a href='https://docs.google.com/presentation/d/1qI4GKFXEuvoGPPbD_IsiyTgx7IsNE8W-2ys_XNehy1o/present#slide=id.p'>tour of amazing developer tooling</a> at breathtaking speed, and then much of the developer tooling panel was given over to a fascinating debate between <strong>Joe Walker</strong> (dev tools lead for Mozilla) and <strong>Kenneth Auchenberg</strong> (creator of RemoteDebug), both outstanding contributors with distinct perspectives, on the integration of inspection/debugging tools with browsers.  <strong>Jeremy Keith&#8217;s</strong> Edge followup post <a href='http://adactio.com/journal/6719/'>Notes from the Edge</a> echos Auchenberg&#8217;s call for inspection tooling to be an area of standardisation and cooperation rather than competition and differentiation between browser vendors.</p>
<p>Some tools I really like &#8211; progress on new IDEs like <a href='http://www.sublimetext.com/'>Sublime</a>, <a href='http://brackets.io'>Brackets</a> and <a href='https://atom.io'>Atom</a> is enhancing developer productivity, but others still feel like sticking plasters or solutions to the wrong problem &#8211; evidenced by the proliferation of build tools like Grunt and Gulp and the 20 quadrillion plugins for each.  The solution to the complexity of build tools and toolchains seems to be less about making the build tools&#8217; config simpler (eg Gulp) and more about redefining the process completely.</p>
<p>On that theme, <strong>Peter Müller</strong> followed up Edge conf with the post <a href='http://mntr.dk/2014/i-love-the-unix-philisophy-but/'>I love the Unix Philosophy but..</a>, about how doing &#8216;one thing well&#8217; is all well and good but the pipes between those processes are ill-designed for a complex graph of web assets (which his <a href='https://github.com/assetgraph/assetgraph/'>Assetgraph tool</a> sets out to solve).  On the dev tools panel, we also had <strong>Henri Bergius</strong>, whose flow based programming tool <a href='http://noflojs.org/'>NoFlo</a> takes this to its logical extreme and makes the entire development workflow graph based.</p>
<p>I&#8217;m still cautious of weighing down projects with lots of build tooling, and at the FT we&#8217;ve tried to combat this while keeping its benefits by creating a <a href='http://labs.ft.com/2014/03/resimplifying-front-end-build-process-with-a-build-service/'>build tool as a service</a>.  We&#8217;re yet to see whether this approach is a good idea over the long term.</p>
<h2>Components and accessibility</h2>
<p>Our coverage of components sparked the most interest &#8211; with Jeremy Keith commenting that <a href='http://adactio.com/journal/6719/'>ARIA is ill equipped to describe Web components</a> with its current, limited vocabulary and lack of extensibility.  <strong>Bruce Lawson</strong> defends the capabilities of ARIA but worries that developers don&#8217;t care enough and we need <a href='http://www.brucelawson.co.uk/2014/notes-on-accessibility-of-web-components/'>passionate evangelism combined with pull requests</a>.  On the panel, <strong>Nicole Sullivan</strong> argued for the divorcing of semantics from markup, and using ARIA to do that.</p>
<p>Bruce also wonders if we&#8217;ll all be importing each other&#8217;s components by referencing &#8216;canonical&#8217; components from a CDN like CDNJS.  But that brings up the question of reinventing the wheel &#8211; will we end up with a hundred different ways of doing a fancy <code>&lt;select></code> element?  <strong>Mairead Buchan</strong> is concerned enough about this that she&#8217;s written a proposal, <a href='http://www.emdeebeebee.com/golden_path'>The Golden Path</a>, wondering if we could have some kind of peer-review platform for best practice web components.</p>
<p>I like this &#8211; it also seems like a good route to standardisation.  A component could become popular, be improved collaboratively via some platform, and then gradually moved along a standards track until it becomes a natively supported element in future browsers.  <strong>Addy Osmani</strong> opened <a href='https://github.com/webcomponents/webcomponents.github.io/issues/77'>an issue</a> on the web components best practices issue tracker to discuss the idea, and it seems to be gaining traction, perhaps as something to build on top of the existing <a href='http://customelements.io'>customelements.io</a> directory.</p>
<h2>Overall reaction</h2>
<p>World-famous cat-loving flame-haired open source advocate and Terminator impressionist <strong>Christian Heilmann</strong> from Mozilla wrote a blog post entitled <a href='http://christianheilmann.com/2014/03/22/edgeconf-3-just-be-there-next-time-trust-me/'>Edgeconf 3: Just be there next time, trust me</a>, which was nice.  I also loved this tweet from Joe Walker, which captured exactly what we&#8217;re trying to do with Edge:</p>
<blockquote class="twitter-tweet" lang="en"><p>Been to many conferences where the summary was &quot;The best track was the hallway track&quot; <a href="https://twitter.com/search?q=%23edgeconf&amp;src=hash">#edgeconf</a> is the hallway track put on the stage.</p>
<p>&mdash; Joe Walker (@joewalker) <a href="https://twitter.com/joewalker/statuses/447323623964286976">March 22, 2014</a></p></blockquote>
<p><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>
<p>We asked for feedback from attendees, and got about 50 responses, which rated the sessions like this:</p>
<p><figure><img alt='Feedback from delegates' src="/wp-content/uploads/2014/03/Screen-Shot-2014-03-29-at-16.18.16.png" width="904" class="alignnone size-full wp-image-9801" srcset="http://labs.ft.com/wp-content/uploads/2014/03/Screen-Shot-2014-03-29-at-16.18.16.png 904w, http://labs.ft.com/wp-content/uploads/2014/03/Screen-Shot-2014-03-29-at-16.18.16-300x101.png 300w" sizes="(max-width: 904px) 100vw, 904px" /></figure></p>
<p>They also nominated their <strong>stand out contributors</strong>, of which these were the top six:</p>
<ol>
<li>Derek Featherstone (<a href='https://twitter.com/feather'>@feather</a>)</li>
<li>Remy Sharp (<a href='https://twitter.com/rem'>@rem</a>)</li>
<li>Alice Bartlett (<a href='https://twitter.com/alicebartlett'>@alicebartlett</a>)</li>
<li>Peter Gasston (<a href='https://twitter.com/stopsatgreen'>@stopsatgreen</a>)</li>
<li>Jake Archibald (<a href='https://twitter.com/jaffathecake'>@jaffathecake</a>)</li>
<li>Matthew Tylee Atkinson (<a href='https://twitter.com/matatk'>@matatk</a>)</li>
</ol>
<p>I like these results because it shows that at Edge, you can be the second most valued contributor simply by <em>being in the audience</em> (Remy was not on any panel).  <strong>Alice Bartlett&#8217;s</strong> contribution to the Future Web panel was highly valued despite her session overall scoring less well, showing that we can recognise the difference between outstanding personal contributions to a discussion and the curation/moderation that sets the scope for the discussion in the first place.  Finally, one of the top six (Mat) is a contributor most people had never heard of, showing that the egoless approach helps to focus minds on the opinions and arguments, not the prestige of the people who have them.</p>
<h2>Let&#8217;s do this again</h2>
<p>Adobe have kindly agreed to host the next Edge conf in <strong>San Francisco on September 20th, 2014</strong>.  We&#8217;ll be at Adobe&#8217;s downtown office for the first Edge conf to come from the West coast (as ever we&#8217;ll also be streaming live online).</p>
<p>More details will be announced soon, so if you want to be first in line, sign up to our newsletter over on the <a href='http://edgeconf.com'>Edge website</a>.</p>
<p>All the videos of the conference are now available on the <a href='http://edgeconf.com'>website</a>, incidentally, professionally captioned and with content search.</p>
]]></content:encoded>
			</item>
		<item>
		<title>(Re)simplifying front-end build process with a build service</title>
		<link>http://labs.ft.com/2014/03/resimplifying-front-end-build-process-with-a-build-service/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=resimplifying-front-end-build-process-with-a-build-service</link>
		<pubDate>Mon, 17 Mar 2014 00:10:29 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[Technote]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=9471</guid>
		<description><![CDATA[Ever thought it would be a good idea to have a build process as a service? We did, so we built one.]]></description>
				<content:encoded><![CDATA[<p class='standfirst'>Ever thought it would be a good idea to have a <strong>build process as a service</strong>, so that doing SASS, browserify, minification and caching of front end dependencies is as easy as writing a &lt;script> or &lt;link /> tag? We did, so we built one.</p>
<p>We are in the midst of developing a new way of building websites for the FT, which we call <a href="http://origami.ft.com">Origami</a>, and because we didn&#8217;t want to build anything monolithic, or yet another framework, it involves a lot of small components. We also have an eye on the implementation of support for <a href='http://www.w3.org/TR/components-intro/'>Web Components</a>, so when it becomes practical to use those, we&#8217;ll be able to turn our components into Web Components.</p>
<p>This does, however, leave us with a problem. We have a lot of websites, and most either don&#8217;t have a build process, or have a process that&#8217;s incompatible with the build pipeline that we have standardised for Origami components (<a href='http://bower.io'>Bower</a>, <a href='http://sass-lang.com/'>SASS</a>, <a href='http://browserify.org/'>Browserify</a> with <a href='https://github.com/eugeneware/debowerify'>debowerify</a> and <a href='https://github.com/substack/brfs'>brfs</a>, and <a href='https://developers.google.com/closure/compiler/'>Closure compiler</a>). And even for new sites, we have teams building using a wide variety of server-side technologies some of whom are not familiar with the front end build tools which are mainly coming out of the NodeJS community.</p>
<p>We needed something that would allow us to jump start a project without setting up a build process: something we could use in hack days or legacy sites. Something that would auto-upgrade modules when new components were released. Something that would let us write a script and link tag into the head of an HTML page and be done with it:</p>
<pre class="prettyprint linenums"><code>&lt;script src='http://build.example.com/bundle/js?modules=module1@^2.3.5,module2,module3@3.4.0'&gt;&lt;/script&gt;
&lt;link href='http://build.example.com/bundle/css?modules=module1@^2.3.5,module2,module3@3.4.0' rel='stylesheet' /&gt;</code></pre>
<h2>Existing solutions</h2>
<p>We started the project not aware of anything else that solved this problem, but since then Steve Souders made me aware of <a href="http://www.yuiblog.com/blog/2008/07/16/combohandler/">Yahoo&#8217;s Combo handler</a>, which Yahoo! has been using since 2008 to concatenate together multiple portions of the YUI framework into a single HTTP download. <a href='http://phuu.net/'>Tom Ashworth</a> also created <a href="http://pldn.io">Pldn.io</a>, which does a similar thing for anything hosted on <a href='http://cdnjs.com'>cdnjs</a>.</p>
<p>But this isn&#8217;t enough. It&#8217;s concatenation of pre-built libraries, which means you run the risk of duplicating dependencies (say you require two components that both contain a copy of Underscore or Backbone), and it doesn&#8217;t do any packaging of the resulting bundle.</p>
<p>Then there&#8217;s <a href='http://wzrd.in/'>browserify CDN</a> (and <a href='http://requirebin.com/'>RequireBin</a>, which is powered by it), which is more promising &#8211; it allows you to create bundles from a list of npm modules, which it then installs using npm and builds using browserify. This is pretty nice, but still falls a bit short of where we wanted to be:</p>
<ul>
<li>it doesn&#8217;t do anything for CSS</li>
<li>being limited to npm means it can only package up public modules</li>
<li>fetching multiple packages in one request requires a POST and returns a data response rather than the raw bundle, so you can&#8217;t use it in a <code>&lt;script&gt;</code> tag.</li>
<li>Issuing an ID for a bundle ties the service to a single shared persistent data store, reducing the scope for it to be a shared-nothing architecture for maximum resilience.</li>
</ul>
<p>These aren&#8217;t necessarily failings of Browserify-CDN, just aspects that make it challenging to use directly for our use case.</p>
<h2>The Origami build service</h2>
<p>So we built our own.  To make things simple, we started with a standardised build process, which made some demands of components:</p>
<ul>
<li>CSS must be written in SASS</li>
<li>JavaScript must be written as CommonJS compatible modules</li>
<li>Each component must have a single &#8216;main&#8217; file for each language, and declare it in a <code>bower.json</code> file</li>
</ul>
<p>The Build service resolves module names to Git repos using the public bower registry and our own private bower registry, which allows us to specify Origami components using short names even though they&#8217;re not in the public registry (though most of them <em>are</em> public, on our GitHub account, so feel free to go have a look if you want).</p>
<p>Here&#8217;s an example, which you get by loading the URL <code>https://build.origami.ft.com/bundles/css?modules=o-grid</code>:</p>
<figure style='width:100%'>
<iframe width="100%" height="300" src='https://build.origami.ft.com/bundles/css?modules=o-grid'></iframe><br />
</figure>
<p>That should show the source of the <a href="http://github.com/Financial-Times/o-grid">o-grid</a> component, our CSS grid.  As I write this, we&#8217;re on version 2.0.7, but, because I didn&#8217;t specify a version number in the <code>modules</code> parameter, the code above will change every time we tag a new version of Grid.</p>
<h2>Granular upgrades</h2>
<p>Because we defer installation to Bower, we get Bower&#8217;s built-in <a href="http://semver.org">Semver</a> support for free.  That means a developer can choose to be as risk-tolerant or averse as they like when embedding build-service resources in their code.  The following build-service paths will all load the same module, but with different rules on when to allow upgrades:</p>
<table>
<tr>
<th>URL</th>
<th>Would load&#8230;</th>
</tr>
<tr>
<td>/bundles/css?modules=module1</td>
<td>most recent tagged version</td>
</tr>
<tr>
<td>/bundles/css?modules=module1@1.2.3</td>
<td>locked to version 1.2.3</td>
</tr>
<tr>
<td>/bundles/css?modules=module1@~1.2.3</td>
<td>latest which is &gt;= 1.2.3, &lt; 1.3</td>
</tr>
</table>
<p>Generally speaking, the best strategy is to allow upgrades up to, but not including, the next <strong>major</strong> version bump, because that&#8217;s where you can expect breaking changes to the component.  That said, some developers prefer to be more specific than that, and others (especially where they are not integrating any of their own code with the component) are happy to not constrain the version at all.</p>
<p>We can&#8217;t yet track a branch, but we&#8217;re thinking of adding that.</p>
<h2>Caching and availability</h2>
<p>Obviously, once a bundle has been built, it will be cached, and next time the same bundle is requested, the service will be able to return the built version quickly.  We can also reuse existing module installations if we&#8217;re building a different module set but which contains some or all of the same modules that we&#8217;ve already installed in order to build other bundles.</p>
<p>If the build service server doesn&#8217;t have a cached version, it returns a <code>202 Accepted</code> response and starts building the bundle asynchronously.  That means we can also put a caching load balancer, which we deploy on a global CDN, in front of multiple build service nodes, which all operate independently.</p>
<p>Linking this back to Origami in general, the Build service is an example of how we are preferring tools over frameworks, and decentralisation over monoliths.  Time will tell if this is a good strategy.  We&#8217;ll let you know!</p>
]]></content:encoded>
			</item>
		<item>
		<title>Client side layout engines: React vs FruitMachine</title>
		<link>http://labs.ft.com/2013/10/client-side-layout-engines-react-vs-fruitmachine/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=client-side-layout-engines-react-vs-fruitmachine</link>
		<pubDate>Sat, 12 Oct 2013 21:33:20 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[Technote]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=9071</guid>
		<description><![CDATA[Facebook's React client-side component layout engine bears a striking resemblance to our own Fruit machine client side component layout engine.  We build the same solution using both, compare the approaches and discuss what problem we're both trying to solve.]]></description>
				<content:encoded><![CDATA[<p>Facebook recently announced <a href="http://facebook.github.io/react/">React</a>, which they describe as &#8216;A JavaScript library for building user interfaces&#8217;.  Well, I thought.  We&#8217;ve got one of those too, called <a href="https://github.com/ftlabs/fruitmachine">Fruit Machine</a>.  I&#8217;d been wondering how they compared and hadn&#8217;t got round to checking out React, but my colleague Matt Andrews spent a few hours pulling together an example component using both Fruit Machine and React, so you can see how they differ.</p>
<p>One of React&#8217;s code samples is a timer component that counts up in seconds from when the page was loaded.  Here&#8217;s their code:</p>
<pre class="prettyprint linenums"><code>var Timer = React.createClass({
  getInitialState: function() {
    return {secondsElapsed: 0};
  },
  tick: function() {
    this.setState({secondsElapsed: this.state.secondsElapsed + 1});
  },
  componentDidMount: function() {
    this.interval = setInterval(this.tick, 1000);
  },
  componentWillUnmount: function() {
    clearInterval(this.interval);
  },
  render: function() {
    return React.DOM.div({},
      'Seconds Elapsed: ' + this.state.secondsElapsed
    );
  }
});</code></pre>
<p>Now here&#8217;s the same thing as a Fruit module:</p>
<pre class="prettyprint linenums"><code>var Timer = fruitmachine.define({
  name: 'timer',
  initialize: function(options){
    this.model.set({ secondsElapsed: 0 });
    this.tick = this.tick.bind(this);
  },
  tick: function() {
    this.model.set({
      secondsElapsed: this.model.get('secondsElapsed') + 1
    });
    this.render();
  },
  setup: function(){
    this.interval = setInterval(this.tick, 1000);
  },
  teardown: function(){
    clearInterval(this.interval);
  },
  template: function(data) {
    return '&lt;div&gt;Seconds Elapsed: ' + data.secondsElapsed + '&lt;/div&gt;';
  }
});</code></pre>
<p>Eerily similar, no?  Maybe Facebook was inspired by Fruit Machine (after all, we got there first), but more likely, it just shows that this is a pretty decent way to solve the problem, and great minds think alike.  We&#8217;re graduating to a third phase in the evolution of web best practice &#8211; from intermingling of markup, style and behaviour, through a phase in which those concerns became ever more separated and encapsulated, and finally to a model where we can do that separation at a component level.  Developments like <a href="http://www.w3.org/TR/2013/WD-components-intro-20130606/">Web Components</a> show the direction the web community is moving, and frameworks like React and Fruit Machine are in fact not a lot more than polyfills for that promised behaviour to come.</p>
<p>There are still some significant differences though, which are worth examining.  For example, React comes with a markup generator in Javascript called JSX, which is designed around the idea that to create the richness of markup that you want, you should have the power of the full programming language, rather than a simplified template engine.  For Fruit Machine, we didn&#8217;t include either markup generator or template engine, so you have to bring your own, though we typically partner it with <a href="http://mustache.github.io/">Mustache</a>.</p>
<p>Another area that differs is the treatment of child views &#8211; ie. how your component can contain other components.  React does this by <a href='http://facebook.github.io/react/docs/multiple-components.html'>creating child elements</a> when the component is rendered and instantiating their components &#8211; heavy influence of custom elements and web components here.  Fruit Machine takes a different approach by <a href='https://github.com/ftlabs/fruitmachine/blob/master/docs/layout-assembly.md'>adding the children as a property of the parent component&#8217;s module definition</a>, and assigning their output to <a href='https://github.com/ftlabs/fruitmachine/blob/master/docs/slots.md'>slots</a> that are specified in the parent component&#8217;s render template.</p>
<p>The advantage of the Fruit machine approach is that it looks like React components effectively hard code what sub-components make up a parent component.  That probably wouldn&#8217;t work quite so well for us; the combination of components is never quite the same page to page, and we use components as responsive layout containers as well as individual widgets.  Also, having got used to logicless templates, going back to being able to have logic in templates feels a little like a backwards step.</p>
<p>React&#8217;s documentation is however, hands down, prettier than ours.</p>
]]></content:encoded>
			</item>
		<item>
		<title>Thoughts from Edge 2</title>
		<link>http://labs.ft.com/2013/10/thoughts-from-edge-2/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=thoughts-from-edge-2</link>
		<pubDate>Wed, 02 Oct 2013 08:51:23 +0000</pubDate>
		<dc:creator><![CDATA[Andrew Betts]]></dc:creator>
				<category><![CDATA[News]]></category>

		<guid isPermaLink="false">http://labs.ft.com/?p=9161</guid>
		<description><![CDATA[The second iteration of our web technologies conference, Edge, took place in New York City last week.  Here, event curator Andrew Betts talks about the motivations for the event, how it went and what we can do better next time.]]></description>
				<content:encoded><![CDATA[<p>I just came back from New York where I hosted the second edition of <a href='http://edgeconf.com'>Edge</a>, a web conference organised jointly by the FT and Google.  It was a great success, and we raised over <strong>$8000 for <a href='http://www.girlswhocode.org'>Girls who code</a></strong>, a wonderful charity and a great cause for the technology industry to get behind.</p>
<figure id="attachment_9241" class="wp-caption alignnone"><img alt='Manu Sporny addressing Edge conf' src="/wp-content/uploads/2013/10/DSCF0233.jpg" width="1005" class="size-full wp-image-9241" srcset="http://labs.ft.com/wp-content/uploads/2013/10/DSCF0233.jpg 1005w, http://labs.ft.com/wp-content/uploads/2013/10/DSCF0233-300x117.jpg 300w" sizes="(max-width: 1005px) 100vw, 1005px" /><figcaption class="wp-caption-text">Manu Sporny addressing Edge conf</figcaption></figure>
<p>Edge is the product of a lot of thought about what I don&#8217;t like about other web conferences, so I thought I&#8217;d share those thoughts with you:</p>
<ul>
<li><b>Cost:</b> A lot of conferences cost upwards of $1000 to attend.  And they often don&#8217;t pass that on to the speakers (at least, not in my experience!).  If you want your conference to be about smart people discussing the way forward, selecting for wealth doesn&#8217;t seem like a good way of doing that.  So we decided Edge should be cheap enough that anyone can go.</li>
<li><b>Expertise level:</b> It used to be that the web was fairly simple, so an expert was not a million miles away from a novice.  Now the complexity is phenomenal, and conference organisers too often don&#8217;t do a good job of grading talks and matching talks to audiences.  It&#8217;s hugely frustrating if you&#8217;re in a talk that turns out to be entry level only to later discover you missed one that was deep and complex.  We run a call for delegates in a similar way to a call for speakers, to try and get a fairly uniform, normalised level of expertise in the room.</li>
<li><b>Verbosity:</b> Everyone hates the person that stands up and spends 5 mins asking a question in the longest winded way possible that no-one wanted to know the answer to anyway.  So we impose speaking time limits on delegates as well as panelists.</li>
<li><b>Format:</b> Having a 30-60 minute talk with a brief Q&#038;A is fundamentally the wrong way around.  We do need that long-talk format, in a training/teaching scenario, and many web conferences have essentially become that: a place for the less experienced to go and learn from experts.  But that&#8217;s not the way standards are made &#8211; they&#8217;re made in small meetings of invited experts.  As an outsider, they can be very difficult or impossible to interact with, and can operate in a very opaque way.  So Edge tries to take the best of both worlds &#8211; the openness and acessibility of web conferences with the productivity and insight generated by working groups, by running panels with 10 minute opening talks.</li>
<li><b>Online participation:</b> A lot of conferences put their talks online, which is great, but very few of them allow you to watch the conference in real time online.  We wanted to make the online streaming almost as good as being there, and as a result, for Edge 2 we had an online audience that at least doubled the audience in the room.</li>
<li><b>Transparency:</b> If an event is for the benefit of the community, and is paid for, there&#8217;s really no excuse not to be completely transparent about the way it&#8217;s funded, where it gets its money and what that money is spent on.  For Edge, we present a summary of our accounts on a slide at the end of the event and announce the donation that we are making to our charity partner, which is whatever money we have left over.</li>
</ul>
<p>Our first attempt was Edge 1 earlier this year in London, and this week at Edge 2 we iterated and changed several things &#8211; we added better timing control, developed a tool for promoting more audience interaction and instant feedback.  We also pre-selected questions to ensure we covered a broad selection of topics, and that the questions were quick and succinct to ask.</p>
<p>The most striking thing we tried was OnSlyde: We worked with <a href='http://wesleyhales.com/'>Wesley Hales</a> who created a version of his <a href='http://onslyde.com/home'>OnSlyde audience interaction app</a> adapted for panel debates, and that gave us the ability to offer the audience real time options for &#8216;Agree&#8217;, &#8216;Disagree&#8217; and &#8216;I want to speak&#8217;.  Compared to Edge 1, this gave us a massive increase in audience interventions, and some amazing data on the sentiment towards the opinions being expressed on the panel.  Wesley crunched the stats and produced these <a href='http://onslyde.com/analytics/edge2013'>spectacular reports</a>:</p>
<figure id="attachment_9231" class="wp-caption alignnone"><img alt='Edge 2 OnSlyde analytics' src="/wp-content/uploads/2013/10/Screen-Shot-2013-10-02-at-09.34.42.png" width="983" class="size-full wp-image-9231" srcset="http://labs.ft.com/wp-content/uploads/2013/10/Screen-Shot-2013-10-02-at-09.34.42.png 983w, http://labs.ft.com/wp-content/uploads/2013/10/Screen-Shot-2013-10-02-at-09.34.42-300x183.png 300w" sizes="(max-width: 983px) 100vw, 983px" /><figcaption class="wp-caption-text">Edge 2 OnSlyde analytics</figcaption></figure>
<p>That all worked pretty well, but we still have stuff to improve:</p>
<ul>
<li>People lost focus when we were debating a particular point, and forgot the context, instead just asking fresh questions.  We should put the questions on the screen to maintain that context</li>
<li>The interaction tool we used, OnSlyde (developed by Wesley Hales) we expected moderators to use to nominate speakers.  We discovered very quickly that it was way better for a behind the scenes person to do that, so we should move that control device to the AV booth.</li>
<li>We forgot to put power outlets out for the delegates, so people gradually ran out of juice during the day.  Oops.</li>
</ul>
<p>So, a lot to be proud of, and a lot of opportunity to do better.  Sounds like we need an Edge 3.  Watch this space.</p>
]]></content:encoded>
			</item>
	</channel>
</rss>
