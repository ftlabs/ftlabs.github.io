---
layout: null
title: 'Fixing app cache'
date: 2012-08-01
permalink: /2012/08/fixing-app-cache/
---
<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en-GB"> <![endif]-->
<!--[if IE 7]>		<html class="no-js lt-ie9 lt-ie8" lang="en-GB"> <![endif]-->
<!--[if IE 8]>		<html class="no-js lt-ie9" lang="en-GB"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en-GB"> <!--<![endif]-->
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Fixing app cache | FT Labs</title>
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
	<script src="https://polyfill.webservices.ft.com/v2/polyfill.min.js"></script>
	<script src="../../../wp-content/themes/ftlabs-2016/main.js"></script>
	<link rel="stylesheet" type="text/css" media="all" href="../../../wp-content/themes/ftlabs-2016/style.css" />

	<link rel='dns-prefetch' href='http://cdnjs.cloudflare.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="FT Labs &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="FT Labs &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="FT Labs &raquo; Fixing app cache Comments Feed" href="feed/index.html" />
<link rel='stylesheet' id='prettify-css'  href='../../../wp-content/plugins/prettify-code-highlight/code.css%3Fver=4.6.4.css' type='text/css' media='all' />
<!-- This site uses the Google Analytics by Yoast plugin v5.4.6 - Universal enabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-32884353-1', 'labs.ft.com');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('send','pageview');

</script>
<!-- / Google Analytics by Yoast -->
<link rel='https://api.w.org/' href='../../../wp-json/index.html' />
<link rel='prev' title='A proposal for preloading resources bound by media queries' href='../../../index.html%3Fp=2489.html' />
<link rel='next' title='Tutorial 2: Supporting both IndexedDB and WebSQL on a cross platform web app' href='../../../index.html%3Fp=2532.html' />
<link rel="canonical" href="../../../index.html%3Fp=2782.html" />
<link rel='shortlink' href='../../../index.html%3Fp=2782.html' />
<link rel="alternate" type="application/json+oembed" href="../../../wp-json/oembed/1.0/embed%3Furl=http%253A%252F%252Flabs.ft.com%252F2012%252F08%252Ffixing-app-cache%252F" />
<link rel="alternate" type="text/xml+oembed" href="../../../wp-json/oembed/1.0/embed%3Furl=http%253A%252F%252Flabs.ft.com%252F2012%252F08%252Ffixing-app-cache%252F&amp;format=xml" />
</head>
<body class="single single-post postid-2782 single-format-standard">
	<div class="app" ontouchstart="">
		<div class='container'>
			<div class='sidebar'>
				<div class='logo-wrap'>
					<a href='../../../index.html' class='logo'>
						<h1>FT Labs</h1>
					</a>
				</div>
				<nav>
					<ul id="menu-header-navigation" class="app-header_nav"><li id="menu-item-14082" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14082"><a href="../../../index.html">Home</a></li>
<li id="menu-item-14083" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-14083"><a href="../../../articles.1.html">Articles</a></li>
<li id="menu-item-14084" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14084"><a href="../../../jobs.1.html">Jobs</a></li>
<li id="menu-item-14085" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-14085"><a href="../../../contact-us.1.html">Contact</a></li>
</ul>				</nav>
			</div>
			<main>
			<script> var page = 'article-view';
			</script>
				<article class="article_content body-text">
									<h1>Fixing app cache</h1>
					<div class="date">by <a href="../../../author/andrew/index.html">Andrew Betts</a>, <time class="entry-date" datetime="2012-08-31T17:43:02+00:00" pubdate>31 August 2012</time></div>					<p>At FT Labs, we are on a mission to fix <a href="https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache', 'app cache');">app cache</a>, for the good of <del>mankind</del> web developers.</p>
<p>Over the last few weeks a couple of important meetings have taken place bringing together developers and browser vendors to try and work out what went wrong and how we can fix an oft-reviled godawful mess that is the HTML5 application cache.  We hosted a meeting of a number of developers and browser vendors here in London on the 14th of August, and Mozilla hosted a meeting on the 24th at their office in Mountain View in Silicon Valley.</p>
<p>At the FT Labs event, the aim was first to air our practical experiences with sites that the developers present were building &#8211; <a href="http://www.facebook.com" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.facebook.com', 'Facebook');">Facebook</a>, <a href="http://www.gmail.com" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.gmail.com', 'GMail');">GMail</a>, the <a href="http://app.ft.com">FT</a> and <a href="http://app.economist.com" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://app.economist.com', 'Economist ');">Economist </a> HTML5 apps and <a href="http://m.lanyrd.com" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://m.lanyrd.com', 'Lanyrd');">Lanyrd</a>.  It was great to explore the techniques that are being used, and the solutions that developers are trying to achieve.  Google, for example, wants not only to update individual files in cache but to apply differential updates so that only new parts of a file are downloaded.  That might sound nuts but it was one of a long list of things throughout the day that followed the same pattern &#8211; we want to do this on the web, and despite the fact that web standards are a million miles away from supporting us in our objective, we want it because it makes for a better app.  And of course you can do it with a native app, yada yada.</p>
<p>For our part, we want to be able to cache media content &#8211; audio and video, individually, in some kind of storage that doesn&#8217;t require us to do crazy stuff just to make efficient use of the meagre quotas we have available.  We want better control over what is cached and what isn&#8217;t, knowledge of whether we got served from cache or not, and we want to be able to ask for more quota.  MUCH more.  No standard tells a browser vendor how much storage they must allow a website to request, so it varies from unusably small to unlimited.</p>
<p>All these complaints came out and gave us a great wealth of shared experience to draw a better mental model of what is wrong with app cache.  But the biggest realisation of all was that none of us actually understands it.  A roomful of some of the smartest developers and browser makers on the planet, allowing an entire day to do so, cannot wrap their heads around the damn thing.  We had no common understanding of either the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#the-application-cache-selection-algorithm" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#the-application-cache-selection-algorithm', 'app cache selection algorithm');">app cache selection algorithm</a> or the <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#application-cache-download-process" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html#application-cache-download-process', 'app cache download process');">app cache download process</a>.</p>
<p>So we started to use what we do know &#8211; the things we wanted to do and couldn&#8217;t &#8211; to build up a set of user stories that could feed back into the spec process and hopefully fix app cache for everyone.  </p>
<p>Mozilla&#8217;s meeting over in California added some more experiences &#8211; <a href="http://m.twitter.com" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://m.twitter.com', 'Twitter');">Twitter</a>, and Microsoft Outlook Web Access particularly, and drew out a number of high level ideas for what a fixed Appcache could look like.  It&#8217;s a view I like a lot, particularly these points:</p>
<ul>
<li>Get rid of master entries concept</li>
<li>When navigating, look for an appcache which contains that URL, rather than look for an appcache which has that URL as master entry.</li>
<li>JS-API for adding/removing/enumerating entries</li>
<li>JS-API for creating/deleting/enumerating appcaches</li>
<li>Knowing if you&#8217;re being served from appcache or not. And which version of the appcache.</li>
<li>Ability to write a HTTP server in JS which handle URI spaces.</li>
<li>Network:* should be default mode</li>
</ul>
<p>The work continues.  We&#8217;ve formed a new <a href="http://www.w3.org/community/fixing-appcache/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.w3.org/community/fixing-appcache/', 'W3C community group called &#8216;Fixing appcache&#8217;');">W3C community group called &#8216;Fixing appcache&#8217;</a>, which Tobie and I are chairing, to move the process forwards, and many of the participants from these two gatherings are members.  The notes from the London (<a href="https://etherpad.mozilla.org/appcache-london" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://etherpad.mozilla.org/appcache-london', 'as it happened');">as it happened</a> and <a href="http://www.w3.org/community/fixing-appcache/wiki/Meeting_notes_14_August_2012" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.w3.org/community/fixing-appcache/wiki/Meeting_notes_14_August_2012', 'more refined');">more refined</a>) and Mountain View (<a href="https://etherpad.mozilla.org/appcache" onclick="__gaTracker('send', 'event', 'outbound-article', 'https://etherpad.mozilla.org/appcache', 'as it happened');">as it happened</a>) meetings are available online, so if you&#8217;re interested in helping out, go and read them, <a href="http://www.w3.org/community/fixing-appcache/" onclick="__gaTracker('send', 'event', 'outbound-article', 'http://www.w3.org/community/fixing-appcache/', 'join the group');">join the group</a>, help us refine the use cases.  Share your own experiences with app cache.</p>
<p>Together, we can fix appcache.  Then we&#8217;ll do the world peace thing.</p>
									</article>
				<div id='comments'></div>
						</main>
		</div>
		<footer class="o-footer o-footer--theme-light" id="footer">
			<div class="o-footer__row o-footer__copyright">
				<div class="o-footer__col o-footer__col--full-width">
					<span>© THE FINANCIAL TIMES LTD 2016.</span>
					<span><abbr title="Financial Times">FT</abbr> and ‘Financial Times’ are trademarks of The Financial Times Ltd.</span>
				</div>
			</div>
			<div class="o-footer__pearson">
				<div class="o-footer__row">
					<div class="o-footer__col o-footer__col--full-width">
						<div class="o-footer__pearson-tagline" aria-label="Always Learning"></div>
						<div class="o-footer__pearson-logo" aria-label="Pearson"></div>
					</div>
				</div>
			</div>
		</footer>
	</div>
	<script>window.onload = function() { prettyPrint(); }</script><script type='text/javascript' src='http://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js?ver=4.6.4'></script>
<script type='text/javascript' src='../../../wp-includes/js/wp-embed.min.js%3Fver=4.6.4'></script>
		<!--
	JIRA Issue collector seems v unreliable
	<script type="text/javascript" src="https://jira.ft.com/s/522ea8c716f027c1d18693d0cb29a056-T/en_UK-7dt5dq/64016/3/1.4.25/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-UK&amp;collectorId=eb5e21bf"></script>-->
</body>
</html>
